<div class="tutorial-container">
  <h1>Signal Models</h1>
  <p class="intro">Learn how to manage complex data models using signals for a more reactive approach to state management.</p>
  
  <div class="section">
    <h2>Managing Complex State with Signals</h2>
    <p>
      Signals are not limited to simple primitive values - they can store and manage complex objects, arrays, and nested data structures.
      This makes them perfect for managing application models and state in a reactive way.
    </p>
    <div class="code-example">
      <pre>{{basicSignalExample}}</pre>
    </div>
  </div>
  
  <div class="section">
    <h2>Immutability with Complex Models</h2>
    <p>
      When working with object or array signals, remember the golden rule: <strong>Never mutate signal values directly</strong>.
      Instead, create new objects or use the spread operator to clone and modify the data.
    </p>
    
    <div class="do-dont-container">
      <div class="dont-do">
        <h3>❌ Don't do this</h3>
        <div class="code-example">
          <pre>{{dontDoExample}}</pre>
        </div>
      </div>
      
      <div class="do-do">
        <h3>✓ Do this instead</h3>
        <div class="code-example">
          <pre>{{doDoExample}}</pre>
        </div>
      </div>
    </div>
  </div>
  
  <div class="section">
    <h2>Working with Nested Models</h2>
    <p>
      When your models have nested objects or arrays, you need to update all levels of nesting immutably.
      This can be done using the spread operator at each nested level.
    </p>
    
    <div class="code-example">
      <pre>{{nestedUpdateExample}}</pre>
    </div>
    
    <p>
      For deep or complex nesting, consider using libraries like immer or immutable.js, or split your model into smaller, more manageable signals.
    </p>
  </div>
  
  <div class="section">
    <h2>Pattern: Signal Model Class</h2>
    <p>
      For complex models, consider creating a dedicated model class that encapsulates signals and provides methods for common operations:
    </p>
    
    <div class="code-example">
      <pre>{{modelClassExample}}</pre>
    </div>
  </div>
  
  <div class="demo-section">
    <h2>Interactive Demo: User Profile Manager</h2>
    
    <div class="interactive-demo">
      <div class="form-panel">
        <h3>Edit User Profile</h3>
        
        <div class="form-group">
          <label for="name">Name:</label>
          <input 
            id="name" 
            type="text" 
            [(ngModel)]="name" 
            (blur)="updateProfile()"
          />
        </div>
        
        <div class="form-group">
          <label for="email">Email:</label>
          <input 
            id="email" 
            type="email" 
            [(ngModel)]="email" 
            (blur)="updateProfile()"
          />
        </div>
        
        <div class="form-group checkbox">
          <label>
            <input 
              type="checkbox" 
              [(ngModel)]="isActive" 
              (change)="updateProfile()"
            />
            Active
          </label>
        </div>
        
        <div class="form-section">
          <h4>User Preferences</h4>
          
          <div class="form-group">
            <label for="theme">Theme:</label>
            <select 
              id="theme" 
              [(ngModel)]="theme" 
              (change)="updatePreferences()">
              <option value="light">Light</option>
              <option value="dark">Dark</option>
              <option value="system">System</option>
            </select>
          </div>
          
          <div class="form-group checkbox">
            <label>
              <input 
                type="checkbox" 
                [(ngModel)]="notifications" 
                (change)="updatePreferences()"
              />
              Enable Notifications
            </label>
          </div>
        </div>
      </div>
      
      <div class="result-panel">
        <h3>User Profile Signal</h3>
        <div class="profile-card" [ngClass]="{'dark-theme': isDarkTheme()}">
          <div class="profile-header">
            <span class="profile-name">{{ userProfile().name }}</span>
            <span class="profile-badge" [ngClass]="{'active': userProfile().active}">
              {{ userProfile().active ? 'Active' : 'Inactive' }}
            </span>
          </div>
          <div class="profile-body">
            <div class="profile-field">
              <span class="label">Email:</span>
              <span class="value">{{ userProfile().email }}</span>
            </div>
            <div class="profile-field">
              <span class="label">Theme:</span>
              <span class="value">{{ userProfile().preferences?.theme || 'Not set' }}</span>
            </div>
            <div class="profile-field">
              <span class="label">Notifications:</span>
              <span class="value">{{ userProfile().preferences?.notifications ? 'Enabled' : 'Disabled' }}</span>
            </div>
            <div class="profile-field">
              <span class="label">Last Updated:</span>
              <span class="value">{{ userProfile().lastUpdated | date:'medium' }}</span>
            </div>
          </div>
        </div>
        
        <h4>Signal Output</h4>
        <div class="code-output">
          <pre>{{ userProfile() | json }}</pre>
        </div>
      </div>
    </div>
  </div>
  
  <div class="section">
    <h2>Best Practices for Signal Models</h2>
    <ul>
      <li><strong>Keep signals at the appropriate level</strong> - Don't make everything a signal; use computed values for derived state</li>
      <li><strong>Use immutable updates</strong> - Always create new objects when updating, don't mutate existing ones</li>
      <li><strong>Avoid deep nesting</strong> - Consider splitting deeply nested models into separate signals</li>
      <li><strong>Encapsulate signal logic</strong> - Use classes or services to encapsulate signal creation and updates</li>
      <li><strong>Consider model validation</strong> - Add validation logic to your model update methods</li>
    </ul>
  </div>
  
  <div class="navigation-links">
    <a routerLink="/signal-inputs">← Signal Inputs</a>
    <a routerLink="/css-learning">CSS Learning →</a>
  </div>
</div> 